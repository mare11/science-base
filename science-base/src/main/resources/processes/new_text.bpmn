<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1qd55pl" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.4.1">
  <bpmn:process id="new_text" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1" camunda:initiator="processInitiator">
      <bpmn:outgoing>SequenceFlow_0dgr4m5</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0dgr4m5" sourceRef="StartEvent_1" targetRef="Task_08d1uqu" />
    <bpmn:userTask id="Task_08d1uqu" name="Select magazine">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="selectedMag" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0dgr4m5</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1k770wz</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="EndEvent_04sjt5k">
      <bpmn:incoming>SequenceFlow_0237yc6</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="Task_0r5c9b7" name="Enter text info" camunda:assignee="${processInitiator}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="title" label="Title" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
              <camunda:constraint name="maxlength" config="50" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="keyTerms" label="Key Terms" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="apstract" label="Apstract" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="scienceArea" label="Science Area" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="file" label="Upload file" type="file" />
          <camunda:formField id="hasCoauthors" label="Add co-authors" type="boolean" />
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="javascript">task.getExecution().setVariable("hasCoauthors", false);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1t8064l</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1li51pe</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1nm0ehf</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_1k770wz" sourceRef="Task_08d1uqu" targetRef="Task_1e2xtr6" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0s7xh02">
      <bpmn:incoming>SequenceFlow_1pxocdf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1t8064l</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0urx6dj</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1pxocdf" sourceRef="Task_1e2xtr6" targetRef="ExclusiveGateway_0s7xh02" />
    <bpmn:sequenceFlow id="SequenceFlow_1t8064l" name="magazine is not open-access (or author has membership)" sourceRef="ExclusiveGateway_0s7xh02" targetRef="Task_0r5c9b7">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!hasOpenAccess || !hasMembership}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0urx6dj" name="magazine is open-access and there is no membership" sourceRef="ExclusiveGateway_0s7xh02" targetRef="Task_0vofu37">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hasOpenAccess &amp;&amp; hasMembership}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1nm0ehf" sourceRef="Task_0r5c9b7" targetRef="Task_1cudgs5" />
    <bpmn:sequenceFlow id="SequenceFlow_1li51pe" sourceRef="Task_0vofu37" targetRef="Task_0r5c9b7" />
    <bpmn:sequenceFlow id="SequenceFlow_1dvduon" sourceRef="Task_17wee1c" targetRef="ServiceTask_16mr4a1" />
    <bpmn:userTask id="Task_17wee1c" name="Add co-author for &#39;${title}&#39;" camunda:assignee="${processInitiator}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="coauthorFirstName" label="First name" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="coauthorLastName" label="Last name" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="coauthorEmail" label="E-mail" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="coauthorCountry" label="Country" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="coauthorCity" label="City" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="continue" label="Add another co-author" type="boolean" />
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="javascript">task.getExecution().setVariable("continue", false);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_066nzsy</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1dvduon</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0zzm4kj">
      <bpmn:incoming>SequenceFlow_0lvjna5</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1vtyltv</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_05zxodr</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1vtyltv" name="select another co-author" sourceRef="ExclusiveGateway_0zzm4kj" targetRef="ExclusiveGateway_1ne82ub">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${continue}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1ne82ub">
      <bpmn:incoming>SequenceFlow_1vtyltv</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1d2fsrv</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_066nzsy</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_123roiw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_066nzsy" name="magazine has co-authors" sourceRef="ExclusiveGateway_1ne82ub" targetRef="Task_17wee1c">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hasCoauthors}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_05zxodr" name="co-authors entered" sourceRef="ExclusiveGateway_0zzm4kj" targetRef="Task_1ahbpt5">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!continue}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_123roiw" name="no co-authors" sourceRef="ExclusiveGateway_1ne82ub" targetRef="Task_1ahbpt5">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!hasCoauthors}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0wlwvjy" sourceRef="Task_19fppwk" targetRef="Task_1l5s795" />
    <bpmn:task id="Task_1l5s795" name="Send e-mails">
      <bpmn:incoming>SequenceFlow_0wlwvjy</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0ahjcau</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_1h6u01v" sourceRef="Task_1ahbpt5" targetRef="Task_19fppwk" />
    <bpmn:sequenceFlow id="SequenceFlow_0ahjcau" sourceRef="Task_1l5s795" targetRef="UserTask_1vbo4g4" />
    <bpmn:userTask id="UserTask_1vbo4g4" name="Approve new text for &#39;${selectedMagData.name}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="title" label="Title" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="keyTerms" label="Key Terms" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="apstract" label="Apstract" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="scienceArea" label="Science Area" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="rejected" label="Reject (not thematically appropriate)" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0ahjcau</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1fngjh2</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_1fngjh2" sourceRef="UserTask_1vbo4g4" targetRef="ExclusiveGateway_1yule06" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_1yule06">
      <bpmn:incoming>SequenceFlow_1fngjh2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0qoyyur</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_14ql3od</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0qoyyur" name="text approved" sourceRef="ExclusiveGateway_1yule06" targetRef="Task_1cqitii">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!rejected}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_14ql3od" name="text not approved" sourceRef="ExclusiveGateway_1yule06" targetRef="Task_0981mha">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rejected}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="EndEvent_0z7xqie">
      <bpmn:incoming>SequenceFlow_0qizyma</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0a59vm6" sourceRef="Task_1cqitii" targetRef="ExclusiveGateway_1hk3buu" />
    <bpmn:userTask id="Task_1cqitii" name="Check text format for &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="file" label="File" type="string" />
          <camunda:formField id="rejected" label="Reject and send to format" type="boolean" />
          <camunda:formField id="authorTimeframe" label="Format timeframe (in minutes)" type="long" />
          <camunda:formField id="editorComment" label="Comment" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0qoyyur</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0a59vm6</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1hk3buu">
      <bpmn:incoming>SequenceFlow_0a59vm6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1bq040q</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_06i8yav</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1bq040q" name="document well formatted" sourceRef="ExclusiveGateway_1hk3buu" targetRef="Task_07lsabj">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!rejected}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_06i8yav" name="format not correct" sourceRef="ExclusiveGateway_1hk3buu" targetRef="UserTask_1m0v9kj">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rejected}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:boundaryEvent id="IntermediateThrowEvent_05yaat1" attachedToRef="UserTask_1m0v9kj">
      <bpmn:outgoing>SequenceFlow_1qy7w3j</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_18wpg2u">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT${authorTimeframe}M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:endEvent id="EndEvent_01gqlxn">
      <bpmn:incoming>SequenceFlow_0sqtrht</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1qy7w3j" name="deadline passed" sourceRef="IntermediateThrowEvent_05yaat1" targetRef="ServiceTask_1v2zko4" />
    <bpmn:task id="Task_0ahlmzp" name="Send e-mail notification">
      <bpmn:incoming>SequenceFlow_1ivtakg</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0sqtrht</bpmn:outgoing>
    </bpmn:task>
    <bpmn:userTask id="UserTask_1m0v9kj" name="Re-format document for text &#39;${title}&#39;" camunda:assignee="${processInitiator}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="title" label="Title" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="keyTerms" label="Key Terms" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="apstract" label="Apstract" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="scienceArea" label="Science Area" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="file" label="Upload file" type="string" />
          <camunda:formField id="editorComment" label="Editor&#39;s comment" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="authorDeadline" label="Deadline" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener expression="${task.getExecution().setVariable(&#34;authorDeadline&#34;, dateTime().plusMinutes(authorTimeframe).toDate())}" event="create" />
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="Groovy">task.getExecution().setVariable("rejected", false);
task.getExecution().setVariable("editorComment", null);
task.getExecution().setVariable("authorTimeframe", null);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_06i8yav</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0x0vlka</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_0x0vlka" sourceRef="UserTask_1m0v9kj" targetRef="Task_19fppwk" />
    <bpmn:sequenceFlow id="SequenceFlow_0sqtrht" sourceRef="Task_0ahlmzp" targetRef="EndEvent_01gqlxn" />
    <bpmn:task id="Task_12bwl7k" name="Send e-mail notification">
      <bpmn:incoming>SequenceFlow_11myu89</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0qizyma</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_0qizyma" sourceRef="Task_12bwl7k" targetRef="EndEvent_0z7xqie" />
    <bpmn:sequenceFlow id="SequenceFlow_1ylawm2" sourceRef="Task_07lsabj" targetRef="ExclusiveGateway_0ceyei9" />
    <bpmn:sequenceFlow id="SequenceFlow_1fc3lmf" sourceRef="Task_06gmusu" targetRef="ExclusiveGateway_0rn5k1i" />
    <bpmn:userTask id="Task_06gmusu" name="Select reviewers for text &#39;${title}&#39;" camunda:assignee="${editorForArea}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="firstRev" label="First Reviewer" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="secondRev" label="Second Reviewer" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="addRev" label="Add additional reviewer" type="boolean" />
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="Groovy">taskFormData = task.getExecution().getProcessEngineServices().getFormService().getTaskFormData(task.getId());
reviewers= task.getExecution().getVariable("reviewersForArea");

formFields = taskFormData. getFormFields();
if(formFields!=null){
   for(field in formFields){
       if( field.getId() == "firstRev" || field.getId() == "secondRev" ){
           items = field.getType().getValues();
           for(rev in reviewers){
               items.put(rev.id, rev.name);
           }
       }
   }
}</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="Groovy">taskFormData = task.getExecution().getProcessEngineServices().getFormService().getTaskFormData(task.getId());
reviewerIds= new java.util.ArrayList();

formFields = taskFormData. getFormFields();
if(formFields!=null){
   for(field in formFields){
        if(field.getId() == "firstRev" || field.getId() == "secondRev"){
            reviewerIds.add(field.getValue().value);
        }
   }
}

task.getExecution().setVariable("reviewerList", reviewerIds);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0stvl5k</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1fc3lmf</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0rn5k1i">
      <bpmn:incoming>SequenceFlow_1fc3lmf</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_137pmen</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1pniph6</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_06gk8xi</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1pniph6" name="additional reviewer" sourceRef="ExclusiveGateway_0rn5k1i" targetRef="Task_0ayjixt">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${addRev}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="Task_0ayjixt" name="Add additional reviewer for text &#39;${title}&#39;" camunda:assignee="${editorForArea}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="additionalRev" label="Additional Reviewer" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="addRev" label="Add another reviewer" type="boolean" />
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="Groovy">taskFormData = task.getExecution().getProcessEngineServices().getFormService().getTaskFormData(task.getId());
reviewers= task.getExecution().getVariable("reviewersForArea");

formFields = taskFormData. getFormFields();
if(formFields!=null){
   for(field in formFields){
       if( field.getId() == "additionalRev"){
           items = field.getType().getValues();
           for(rev in reviewers){
               items.put(rev.id, rev.name);
           }
       }
   }
}

task.getExecution().setVariable("addRev", false);</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="Groovy">taskFormData = task.getExecution().getProcessEngineServices().getFormService().getTaskFormData(task.getId());
reviewerIds= task.getExecution().getVariable("reviewerList");

formFields = taskFormData. getFormFields();
if(formFields!=null){
   for(field in formFields){
       if(field.getId() == "additionalRev"){
            reviewerIds.add(field.getValue());
       }
   }
}

task.getExecution().setVariable("reviewerList", reviewerIds);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1pniph6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_137pmen</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_06gk8xi" name="all reviewers are selected" sourceRef="ExclusiveGateway_0rn5k1i" targetRef="UserTask_0epk6er">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!addRev}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_137pmen" sourceRef="Task_0ayjixt" targetRef="ExclusiveGateway_0rn5k1i" />
    <bpmn:userTask id="Task_0jfht5x" name="Review text &#39;${title}&#39;" camunda:assignee="${reviewer}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="file" label="File" type="string" />
          <camunda:formField id="reviewCommentAuthor" label="Comment for author" type="string" />
          <camunda:formField id="reviewCommentEditor" label="Comment for editor" type="string" />
          <camunda:formField id="reviewRecommendation" label="Recommendation" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="recomm1" name="Accept" />
            <camunda:value id="recomm2" name="Accept (minor updates)" />
            <camunda:value id="recomm3" name="Conditionally accept (major updates)" />
            <camunda:value id="recomm4" name="Reject" />
          </camunda:formField>
          <camunda:formField id="reviewDeadline" label="Deadline" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="Groovy">reviewList = task.getExecution().getVariable("reviews");
newReview = [reviewedBy:reviewer, commentAuthor:reviewCommentAuthor, commentEditor:reviewCommentEditor, recommendation:reviewRecommendation];
reviewList.add(newReview);

reviewerIds = task.getExecution().getVariable("reviewerList");
reviewerIds.remove(reviewer);
task.getExecution().setVariable("reviewerList", reviewerIds);
task.getExecution().setVariable("reviews", reviewList);
task.getExecution().setVariable("reviewCommentAuthor", null);
task.getExecution().setVariable("reviewCommentEditor", null);
task.getExecution().setVariable("reviewRecommendation", null);</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener event="delete">
          <camunda:script scriptFormat="Groovy">reviewerIds = task.getExecution().getVariable("reviewerList");
reviewerIds.remove(task.assignee);
task.getExecution().setVariable("reviewerList", reviewerIds);

timedOutReviewers = task.getExecution().getVariable("timedOutReviewers");
timedOutReviewers.add(task.assignee);
task.getExecution().setVariable("timedOutReviewers", timedOutReviewers);</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="Groovy">task.getExecution().setVariable("timedOutReviewers", []);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0xnmcpc</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1igr8cw</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_01ejqcl</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics camunda:collection="${reviewerList}" camunda:elementVariable="reviewer" />
    </bpmn:userTask>
    <bpmn:boundaryEvent id="IntermediateThrowEvent_09xhy49" attachedToRef="Task_0jfht5x">
      <bpmn:outgoing>SequenceFlow_0rrvc5w</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT${reviewTimeframe}M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0rrvc5w" name="deadline passed" sourceRef="IntermediateThrowEvent_09xhy49" targetRef="UserTask_098ndyi" />
    <bpmn:userTask id="UserTask_098ndyi" name="Select reviewer replacement for text &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="additionalRev" label="Additional Reviewer" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">taskFormData = task.getExecution().getProcessEngineServices().getFormService().getTaskFormData(task.getId());
reviewers= task.getExecution().getVariable("reviewersForArea");

formFields = taskFormData. getFormFields();
if(formFields!=null){
   for(field in formFields){
       if( field.getId() == "additionalRev"){
           items = field.getType().getValues();
           for(rev in reviewers){
               items.put(rev.id, rev.name);
           }
       }
   }
}</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="Groovy">${task.getExecution().setVariable("timedOutReviewers", dateTime().plusMinutes(reviewTimeframe).toDate())};
reviewerIds = task.getExecution().getVariable("reviewerList");
reviewerIds.add(additionalRev);
task.getExecution().setVariable("reviewerList", reviewerIds);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0rrvc5w</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1igr8cw</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics camunda:collection="${timedOutReviewers}" camunda:elementVariable="timedOutReviewer" />
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_01ejqcl" sourceRef="Task_0jfht5x" targetRef="Task_1e2apu6" />
    <bpmn:sequenceFlow id="SequenceFlow_0wr8c9f" sourceRef="Task_1e2apu6" targetRef="UserTask_038hl60" />
    <bpmn:userTask id="Task_1e2apu6" name="Check text review for &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="reviewedBy" label="Reviewer" type="string" defaultValue="${review.reviewedBy}" />
          <camunda:formField id="reviewCommentAuthor" label="Comment for author" type="string" defaultValue="${review.commentAuthor}" />
          <camunda:formField id="reviewCommentEditor" label="Comment for editor" type="string" defaultValue="${review.commentEditor}" />
          <camunda:formField id="recommendation" label="Recommended action" type="string" defaultValue="${review.recommendation}" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_01ejqcl</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0wr8c9f</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics camunda:collection="${reviews}" camunda:elementVariable="review" />
    </bpmn:userTask>
    <bpmn:scriptTask id="Task_07lsabj" name="Get editor and reviewers for selected science area" scriptFormat="Groovy">
      <bpmn:incoming>SequenceFlow_1bq040q</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1ylawm2</bpmn:outgoing>
      <bpmn:script>selectedArea = execution.getVariable("scienceArea");
areaEditors = execution.getVariable("areaEditors");
areaReviewers = execution.getVariable("areaReviewers");

editorForArea = areaEditors[selectedArea];
reviewersForArea = areaReviewers[selectedArea];

if(!editorForArea){
    editorForArea = execution.getVariable("selectedMagData").mainEditor;
}

execution.setVariable("editorForArea", editorForArea);
execution.setVariable("reviewersForArea", reviewersForArea);
execution.setVariable("hasReviewers", !reviewersForArea.isEmpty());
execution.setVariable("reviews", []);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0ceyei9">
      <bpmn:incoming>SequenceFlow_1ylawm2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0stvl5k</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_056tlbo</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0stvl5k" name="reviewers available" sourceRef="ExclusiveGateway_0ceyei9" targetRef="Task_06gmusu">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hasReviewers}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_056tlbo" name="no available reviewers" sourceRef="ExclusiveGateway_0ceyei9" targetRef="UserTask_006v81n">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!hasReviewers}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1n2dyxp">
      <bpmn:incoming>SequenceFlow_19sbvfr</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1s1lqnn</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_05q37nd</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1s1lqnn" name="text is accepted with updates" sourceRef="ExclusiveGateway_1n2dyxp" targetRef="Task_1wlc87k">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decision == 'action2' || decision == 'action3'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="UserTask_006v81n" name="Review text &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="file" label="File" type="string" />
          <camunda:formField id="reviewCommentAuthor" label="Comment" type="string" />
        </camunda:formData>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="Groovy">reviewList = task.getExecution().getVariable("reviews");
newReview = [commentAuthor:reviewCommentAuthor];
reviewList.add(newReview);

task.getExecution().setVariable("reviews", reviewList);
task.getExecution().setVariable("reviewCommentAuthor", null);</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_056tlbo</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1jtkcmc</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_1jtkcmc" sourceRef="UserTask_006v81n" targetRef="UserTask_038hl60" />
    <bpmn:userTask id="UserTask_038hl60" name="Make a decision for text &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="decision" label="Decision" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="action1" name="Accept" />
            <camunda:value id="action2" name="Accept (minor updates)" />
            <camunda:value id="action3" name="Conditionally accept (major updates)" />
            <camunda:value id="action4" name="Reject" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0wr8c9f</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1jtkcmc</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_19sbvfr</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_19sbvfr" sourceRef="UserTask_038hl60" targetRef="ExclusiveGateway_1n2dyxp" />
    <bpmn:sequenceFlow id="SequenceFlow_05q37nd" name="text is accepted or rejected" sourceRef="ExclusiveGateway_1n2dyxp" targetRef="ServiceTask_1ki8xoy">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decision == 'action1' || decision == 'action4'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:task id="Task_0idf62a" name="Send e-mail notification">
      <bpmn:incoming>SequenceFlow_0zcmnxv</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1u8482a</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="EndEvent_0t5wm5w">
      <bpmn:incoming>SequenceFlow_1u8482a</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1u8482a" sourceRef="Task_0idf62a" targetRef="EndEvent_0t5wm5w" />
    <bpmn:sequenceFlow id="SequenceFlow_0sly7vj" sourceRef="Task_1wlc87k" targetRef="SubProcess_1h0prbh" />
    <bpmn:userTask id="Task_1wlc87k" name="Enter correction timeframe for &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="correctionTimeframe" label="Correction timeframe (in minutes)" type="long">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener expression="${task.getExecution().setVariable(&#34;correctionTimeframe&#34;, null)}" event="create" />
        <camunda:taskListener expression="${task.getExecution().setVariable(&#34;correctionDeadline&#34;, dateTime().plusMinutes(correctionTimeframe).toDate())}" event="complete" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1s1lqnn</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0go72rk</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0sly7vj</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:boundaryEvent id="IntermediateThrowEvent_1ejotpp" attachedToRef="SubProcess_1h0prbh">
      <bpmn:outgoing>SequenceFlow_0gqsdiw</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT${correctionTimeframe}M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:subProcess id="SubProcess_1h0prbh">
      <bpmn:incoming>SequenceFlow_0sly7vj</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_17gcga3</bpmn:outgoing>
      <bpmn:startEvent id="StartEvent_0wctu20">
        <bpmn:outgoing>SequenceFlow_1w870fq</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:userTask id="UserTask_1mew087" name="Review for &#39;${title}&#39;" camunda:assignee="${processInitiator}">
        <bpmn:extensionElements>
          <camunda:formData>
            <camunda:formField id="comment" label="Comment" type="string" defaultValue="${review.commentAuthor}" />
          </camunda:formData>
        </bpmn:extensionElements>
        <bpmn:incoming>SequenceFlow_1fpsa5h</bpmn:incoming>
        <bpmn:outgoing>SequenceFlow_1iea5hb</bpmn:outgoing>
        <bpmn:multiInstanceLoopCharacteristics camunda:collection="${reviews}" camunda:elementVariable="review" />
      </bpmn:userTask>
      <bpmn:userTask id="Task_0oqlrwi" name="Correction needed for &#39;${title}&#39;" camunda:assignee="${processInitiator}">
        <bpmn:extensionElements>
          <camunda:formData>
            <camunda:formField id="correctionDeadline" label="Deadline" type="string">
              <camunda:validation>
                <camunda:constraint name="readonly" />
              </camunda:validation>
            </camunda:formField>
          </camunda:formData>
        </bpmn:extensionElements>
        <bpmn:incoming>SequenceFlow_1w870fq</bpmn:incoming>
        <bpmn:outgoing>SequenceFlow_1fpsa5h</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:userTask id="Task_08i1ak7" name="Submit corrected version for &#39;${title}&#39;" camunda:assignee="${processInitiator}">
        <bpmn:extensionElements>
          <camunda:formData>
            <camunda:formField id="file" label="File" type="string" />
            <camunda:formField id="correctionComment" label="Comment" type="string">
              <camunda:validation>
                <camunda:constraint name="required" />
              </camunda:validation>
            </camunda:formField>
            <camunda:formField id="correctionDeadline" label="Deadline" type="string">
              <camunda:validation>
                <camunda:constraint name="readonly" />
              </camunda:validation>
            </camunda:formField>
          </camunda:formData>
          <camunda:taskListener expression="${task.getExecution().setVariable(&#34;correctionComment&#34;, null)}" event="create" />
        </bpmn:extensionElements>
        <bpmn:incoming>SequenceFlow_1iea5hb</bpmn:incoming>
        <bpmn:outgoing>SequenceFlow_1jqosge</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="SequenceFlow_1fpsa5h" sourceRef="Task_0oqlrwi" targetRef="UserTask_1mew087" />
      <bpmn:sequenceFlow id="SequenceFlow_1iea5hb" sourceRef="UserTask_1mew087" targetRef="Task_08i1ak7" />
      <bpmn:sequenceFlow id="SequenceFlow_1w870fq" sourceRef="StartEvent_0wctu20" targetRef="Task_0oqlrwi" />
      <bpmn:endEvent id="EndEvent_1rrdcx5">
        <bpmn:incoming>SequenceFlow_1jqosge</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="SequenceFlow_1jqosge" sourceRef="Task_08i1ak7" targetRef="EndEvent_1rrdcx5" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="SequenceFlow_17gcga3" sourceRef="SubProcess_1h0prbh" targetRef="ExclusiveGateway_1jsixfd" />
    <bpmn:task id="Task_04wjrn7" name="Send e-mail notification">
      <bpmn:incoming>SequenceFlow_1ko2fps</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_12rb5lt</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_0gqsdiw" name="deadline passed" sourceRef="IntermediateThrowEvent_1ejotpp" targetRef="ServiceTask_1v9silr" />
    <bpmn:endEvent id="EndEvent_1hm1qoz">
      <bpmn:incoming>SequenceFlow_12rb5lt</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_12rb5lt" sourceRef="Task_04wjrn7" targetRef="EndEvent_1hm1qoz" />
    <bpmn:userTask id="UserTask_136ygle" name="Make a decision for corrected text &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="file" type="string" />
          <camunda:formField id="correctionComment" type="string">
            <camunda:validation>
              <camunda:constraint name="readonly" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="finalDecision" label="Decision" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="finalAction1" name="Accept" />
            <camunda:value id="finalAction2" name="Reject (send to correction again)" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0r6bf1a</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1rqeihd</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_1rqeihd" sourceRef="UserTask_136ygle" targetRef="ExclusiveGateway_0efz7a1" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0efz7a1">
      <bpmn:incoming>SequenceFlow_1rqeihd</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1tnfo1v</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0go72rk</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1tnfo1v" name="text is accepted" sourceRef="ExclusiveGateway_0efz7a1" targetRef="Task_1e7zlpb">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${finalDecision == 'finalAction1'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1jsixfd">
      <bpmn:incoming>SequenceFlow_17gcga3</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0r6bf1a</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1lp2gbj</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0r6bf1a" name="minor changes requested or missing reviewers" sourceRef="ExclusiveGateway_1jsixfd" targetRef="UserTask_136ygle">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decision == 'action2' || !hasReviewers}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0go72rk" name="correction needed again" sourceRef="ExclusiveGateway_0efz7a1" targetRef="Task_1wlc87k">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${finalDecision == 'finalAction2'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="UserTask_0epk6er" name="Enter review timeframe for &#39;${title}&#39;" camunda:assignee="${selectedMagData.mainEditor}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="reviewTimeframe" label="Review timeframe (in minutes)" type="long">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="Groovy">${task.getExecution().setVariable("reviewDeadline", dateTime().plusMinutes(reviewTimeframe).toDate())};

task.getExecution().setVariable("reviews", []);
task.getExecution().setVariable("reviewCommentAuthor", null);
task.getExecution().setVariable("reviewCommentEditor", null);
task.getExecution().setVariable("reviewRecommendation", null);</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener expression="${task.getExecution().setVariable(&#34;reviewDeadline&#34;, null)}" event="create" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_06gk8xi</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1lal9tn</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0xnmcpc</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_0xnmcpc" sourceRef="UserTask_0epk6er" targetRef="Task_0jfht5x" />
    <bpmn:sequenceFlow id="SequenceFlow_1lp2gbj" name="major changes requested and reviewers available" sourceRef="ExclusiveGateway_1jsixfd" targetRef="Task_0wun3b0">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decision == 'action3' &amp;&amp; hasReviewers}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1yqv543" sourceRef="Task_1e7zlpb" targetRef="Task_1lwyoti" />
    <bpmn:task id="Task_1lwyoti" name="Send e-mail notification">
      <bpmn:incoming>SequenceFlow_1yqv543</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0237yc6</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_0237yc6" sourceRef="Task_1lwyoti" targetRef="EndEvent_04sjt5k" />
    <bpmn:serviceTask id="Task_19fppwk" name="Save data" camunda:expression="${execution.setVariable(&#34;saved&#34;, true)}">
      <bpmn:incoming>SequenceFlow_1h6u01v</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0x0vlka</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0wlwvjy</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_11myu89" sourceRef="Task_0981mha" targetRef="Task_12bwl7k" />
    <bpmn:serviceTask id="Task_0981mha" name="Save data" camunda:expression="${execution.setVariable(&#34;saved&#34;, true)}">
      <bpmn:incoming>SequenceFlow_14ql3od</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_11myu89</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="ServiceTask_1v2zko4" name="Save data" camunda:expression="${execution.setVariable(&#34;saved&#34;, true)}">
      <bpmn:incoming>SequenceFlow_1qy7w3j</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1ivtakg</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1ivtakg" sourceRef="ServiceTask_1v2zko4" targetRef="Task_0ahlmzp" />
    <bpmn:serviceTask id="ServiceTask_1v9silr" name="Save data" camunda:expression="${execution.setVariable(&#34;saved&#34;, true)}">
      <bpmn:incoming>SequenceFlow_0gqsdiw</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1ko2fps</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1ko2fps" sourceRef="ServiceTask_1v9silr" targetRef="Task_04wjrn7" />
    <bpmn:serviceTask id="ServiceTask_1ki8xoy" name="Save data" camunda:expression="${execution.setVariable(&#34;saved&#34;, true)}">
      <bpmn:incoming>SequenceFlow_05q37nd</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0zcmnxv</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0zcmnxv" sourceRef="ServiceTask_1ki8xoy" targetRef="Task_0idf62a" />
    <bpmn:serviceTask id="Task_1e7zlpb" name="Save data" camunda:expression="${execution.setVariable(&#34;saved&#34;, true)}">
      <bpmn:incoming>SequenceFlow_1tnfo1v</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1yqv543</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1igr8cw" sourceRef="UserTask_098ndyi" targetRef="Task_0jfht5x" />
    <bpmn:sequenceFlow id="SequenceFlow_1lal9tn" sourceRef="Task_0wun3b0" targetRef="UserTask_0epk6er" />
    <bpmn:scriptTask id="Task_0wun3b0" name="Get previous reviewers" scriptFormat="Groovy">
      <bpmn:incoming>SequenceFlow_1lp2gbj</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1lal9tn</bpmn:outgoing>
      <bpmn:script>reviewList = execution.getVariable("reviews");
reviewerIds = [];
for(rev in reviewList){
    reviewerIds.add(rev.reviewedBy);
}
execution.setVariable("reviewerList", reviewerIds);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Task_1e2xtr6" name="Check payment method (and membership)" camunda:class="org.upp.sciencebase.text.CheckPaymentMethodService">
      <bpmn:incoming>SequenceFlow_1k770wz</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1pxocdf</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_0vofu37" name="Pay membership fee" camunda:class="org.upp.sciencebase.text.PayMembershipService">
      <bpmn:incoming>SequenceFlow_0urx6dj</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1li51pe</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1d2fsrv" sourceRef="Task_1cudgs5" targetRef="ExclusiveGateway_1ne82ub" />
    <bpmn:serviceTask id="Task_1cudgs5" name="Save and validate data" camunda:class="org.upp.sciencebase.text.SaveTextService">
      <bpmn:incoming>SequenceFlow_1nm0ehf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1d2fsrv</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_1ahbpt5" name="Send e-mails">
      <bpmn:incoming>SequenceFlow_05zxodr</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_123roiw</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1h6u01v</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="ServiceTask_16mr4a1" name="Save data" camunda:expression="${execution.setVariable(&#34;saved&#34;, true)}">
      <bpmn:incoming>SequenceFlow_1dvduon</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0lvjna5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0lvjna5" sourceRef="ServiceTask_16mr4a1" targetRef="ExclusiveGateway_0zzm4kj" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="new_text">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="349" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0dgr4m5_di" bpmnElement="SequenceFlow_0dgr4m5">
        <di:waypoint x="188" y="367" />
        <di:waypoint x="260" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0phe5cx_di" bpmnElement="Task_08d1uqu">
        <dc:Bounds x="260" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_04sjt5k_di" bpmnElement="EndEvent_04sjt5k">
        <dc:Bounds x="6242" y="349" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_15gol7m_di" bpmnElement="Task_0r5c9b7">
        <dc:Bounds x="850" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1k770wz_di" bpmnElement="SequenceFlow_1k770wz">
        <di:waypoint x="360" y="367" />
        <di:waypoint x="420" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0s7xh02_di" bpmnElement="ExclusiveGateway_0s7xh02" isMarkerVisible="true">
        <dc:Bounds x="585" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1pxocdf_di" bpmnElement="SequenceFlow_1pxocdf">
        <di:waypoint x="520" y="367" />
        <di:waypoint x="585" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1t8064l_di" bpmnElement="SequenceFlow_1t8064l">
        <di:waypoint x="635" y="367" />
        <di:waypoint x="850" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="723" y="303" width="81" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0urx6dj_di" bpmnElement="SequenceFlow_0urx6dj">
        <di:waypoint x="610" y="392" />
        <di:waypoint x="610" y="570" />
        <di:waypoint x="730" y="570" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="518" y="463" width="84" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1nm0ehf_di" bpmnElement="SequenceFlow_1nm0ehf">
        <di:waypoint x="950" y="367" />
        <di:waypoint x="1000" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1li51pe_di" bpmnElement="SequenceFlow_1li51pe">
        <di:waypoint x="830" y="570" />
        <di:waypoint x="900" y="570" />
        <di:waypoint x="900" y="407" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1dvduon_di" bpmnElement="SequenceFlow_1dvduon">
        <di:waypoint x="1400" y="367" />
        <di:waypoint x="1470" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0jvsx35_di" bpmnElement="Task_17wee1c">
        <dc:Bounds x="1300" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0zzm4kj_di" bpmnElement="ExclusiveGateway_0zzm4kj" isMarkerVisible="true">
        <dc:Bounds x="1625" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1vtyltv_di" bpmnElement="SequenceFlow_1vtyltv">
        <di:waypoint x="1650" y="342" />
        <di:waypoint x="1650" y="260" />
        <di:waypoint x="1180" y="260" />
        <di:waypoint x="1180" y="342" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1382" y="226" width="88" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1ne82ub_di" bpmnElement="ExclusiveGateway_1ne82ub" isMarkerVisible="true">
        <dc:Bounds x="1155" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_066nzsy_di" bpmnElement="SequenceFlow_066nzsy">
        <di:waypoint x="1205" y="367" />
        <di:waypoint x="1300" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1207" y="373" width="88" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_05zxodr_di" bpmnElement="SequenceFlow_05zxodr">
        <di:waypoint x="1675" y="367" />
        <di:waypoint x="1760" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1691" y="336" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_123roiw_di" bpmnElement="SequenceFlow_123roiw">
        <di:waypoint x="1180" y="392" />
        <di:waypoint x="1180" y="470" />
        <di:waypoint x="1810" y="470" />
        <di:waypoint x="1810" y="407" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1474" y="453" width="68" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0wlwvjy_di" bpmnElement="SequenceFlow_0wlwvjy">
        <di:waypoint x="2030" y="367" />
        <di:waypoint x="2120" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_1l5s795_di" bpmnElement="Task_1l5s795">
        <dc:Bounds x="2120" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1h6u01v_di" bpmnElement="SequenceFlow_1h6u01v">
        <di:waypoint x="1860" y="367" />
        <di:waypoint x="1930" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0ahjcau_di" bpmnElement="SequenceFlow_0ahjcau">
        <di:waypoint x="2220" y="367" />
        <di:waypoint x="2290" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1vbo4g4_di" bpmnElement="UserTask_1vbo4g4">
        <dc:Bounds x="2290" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1fngjh2_di" bpmnElement="SequenceFlow_1fngjh2">
        <di:waypoint x="2390" y="367" />
        <di:waypoint x="2455" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1yule06_di" bpmnElement="ExclusiveGateway_1yule06" isMarkerVisible="true">
        <dc:Bounds x="2455" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0qoyyur_di" bpmnElement="SequenceFlow_0qoyyur">
        <di:waypoint x="2505" y="367" />
        <di:waypoint x="2690" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2567" y="349" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_14ql3od_di" bpmnElement="SequenceFlow_14ql3od">
        <di:waypoint x="2480" y="392" />
        <di:waypoint x="2480" y="520" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2388" y="443" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0z7xqie_di" bpmnElement="EndEvent_0z7xqie">
        <dc:Bounds x="2742" y="542" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0a59vm6_di" bpmnElement="SequenceFlow_0a59vm6">
        <di:waypoint x="2790" y="367" />
        <di:waypoint x="2885" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0imdxz0_di" bpmnElement="Task_1cqitii">
        <dc:Bounds x="2690" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1hk3buu_di" bpmnElement="ExclusiveGateway_1hk3buu" isMarkerVisible="true">
        <dc:Bounds x="2885" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1bq040q_di" bpmnElement="SequenceFlow_1bq040q">
        <di:waypoint x="2935" y="367" />
        <di:waypoint x="3090" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2966" y="336" width="71" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_06i8yav_di" bpmnElement="SequenceFlow_06i8yav">
        <di:waypoint x="2910" y="392" />
        <di:waypoint x="2910" y="520" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2816" y="419" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BoundaryEvent_1ecgmo3_di" bpmnElement="IntermediateThrowEvent_05yaat1">
        <dc:Bounds x="2942" y="582" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2982" y="515" width="85" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_01gqlxn_di" bpmnElement="EndEvent_01gqlxn">
        <dc:Bounds x="3362" y="582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1qy7w3j_di" bpmnElement="SequenceFlow_1qy7w3j">
        <di:waypoint x="2978" y="600" />
        <di:waypoint x="3080" y="600" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2984" y="582" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0ahlmzp_di" bpmnElement="Task_0ahlmzp">
        <dc:Bounds x="3220" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1m0v9kj_di" bpmnElement="UserTask_1m0v9kj">
        <dc:Bounds x="2860" y="520" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0x0vlka_di" bpmnElement="SequenceFlow_0x0vlka">
        <di:waypoint x="2910" y="600" />
        <di:waypoint x="2910" y="660" />
        <di:waypoint x="1980" y="660" />
        <di:waypoint x="1980" y="407" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0sqtrht_di" bpmnElement="SequenceFlow_0sqtrht">
        <di:waypoint x="3320" y="600" />
        <di:waypoint x="3362" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_12bwl7k_di" bpmnElement="Task_12bwl7k">
        <dc:Bounds x="2590" y="520" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0qizyma_di" bpmnElement="SequenceFlow_0qizyma">
        <di:waypoint x="2690" y="560" />
        <di:waypoint x="2742" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1ylawm2_di" bpmnElement="SequenceFlow_1ylawm2">
        <di:waypoint x="3190" y="367" />
        <di:waypoint x="3235" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1fc3lmf_di" bpmnElement="SequenceFlow_1fc3lmf">
        <di:waypoint x="3460" y="367" />
        <di:waypoint x="3495" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1wq7aae_di" bpmnElement="Task_06gmusu">
        <dc:Bounds x="3360" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0rn5k1i_di" bpmnElement="ExclusiveGateway_0rn5k1i" isMarkerVisible="true">
        <dc:Bounds x="3495" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1pniph6_di" bpmnElement="SequenceFlow_1pniph6">
        <di:waypoint x="3500" y="372" />
        <di:waypoint x="3500" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3446" y="456" width="48" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1br3oob_di" bpmnElement="Task_0ayjixt">
        <dc:Bounds x="3470" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_06gk8xi_di" bpmnElement="SequenceFlow_06gk8xi">
        <di:waypoint x="3545" y="367" />
        <di:waypoint x="3640" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3535" y="336" width="81" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_137pmen_di" bpmnElement="SequenceFlow_137pmen">
        <di:waypoint x="3540" y="560" />
        <di:waypoint x="3540" y="372" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1d1m2bb_di" bpmnElement="Task_0jfht5x">
        <dc:Bounds x="3800" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BoundaryEvent_0ovkr5c_di" bpmnElement="IntermediateThrowEvent_09xhy49">
        <dc:Bounds x="3862" y="389" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0rrvc5w_di" bpmnElement="SequenceFlow_0rrvc5w">
        <di:waypoint x="3880" y="425" />
        <di:waypoint x="3880" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3889" y="483" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_098ndyi_di" bpmnElement="UserTask_098ndyi">
        <dc:Bounds x="3800" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_01ejqcl_di" bpmnElement="SequenceFlow_01ejqcl">
        <di:waypoint x="3900" y="367" />
        <di:waypoint x="4020" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0wr8c9f_di" bpmnElement="SequenceFlow_0wr8c9f">
        <di:waypoint x="4120" y="367" />
        <di:waypoint x="4180" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0i2q9s6_di" bpmnElement="Task_1e2apu6">
        <dc:Bounds x="4020" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ScriptTask_1k9zekw_di" bpmnElement="Task_07lsabj">
        <dc:Bounds x="3090" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0ceyei9_di" bpmnElement="ExclusiveGateway_0ceyei9" isMarkerVisible="true">
        <dc:Bounds x="3235" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0stvl5k_di" bpmnElement="SequenceFlow_0stvl5k">
        <di:waypoint x="3285" y="367" />
        <di:waypoint x="3360" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3299" y="336" width="48" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_056tlbo_di" bpmnElement="SequenceFlow_056tlbo">
        <di:waypoint x="3260" y="342" />
        <di:waypoint x="3260" y="240" />
        <di:waypoint x="3730" y="240" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3190" y="259" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1n2dyxp_di" bpmnElement="ExclusiveGateway_1n2dyxp" isMarkerVisible="true">
        <dc:Bounds x="4325" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1s1lqnn_di" bpmnElement="SequenceFlow_1s1lqnn">
        <di:waypoint x="4375" y="367" />
        <di:waypoint x="4510" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4415" y="336" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_006v81n_di" bpmnElement="UserTask_006v81n">
        <dc:Bounds x="3730" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1jtkcmc_di" bpmnElement="SequenceFlow_1jtkcmc">
        <di:waypoint x="3830" y="240" />
        <di:waypoint x="4230" y="240" />
        <di:waypoint x="4230" y="327" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_038hl60_di" bpmnElement="UserTask_038hl60">
        <dc:Bounds x="4180" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_19sbvfr_di" bpmnElement="SequenceFlow_19sbvfr">
        <di:waypoint x="4280" y="367" />
        <di:waypoint x="4325" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_05q37nd_di" bpmnElement="SequenceFlow_05q37nd">
        <di:waypoint x="4350" y="392" />
        <di:waypoint x="4350" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4254" y="456" width="90" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0idf62a_di" bpmnElement="Task_0idf62a">
        <dc:Bounds x="4460" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0t5wm5w_di" bpmnElement="EndEvent_0t5wm5w">
        <dc:Bounds x="4632" y="582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1u8482a_di" bpmnElement="SequenceFlow_1u8482a">
        <di:waypoint x="4560" y="600" />
        <di:waypoint x="4632" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1mew087_di" bpmnElement="UserTask_1mew087">
        <dc:Bounds x="4880" y="320" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1iea5hb_di" bpmnElement="SequenceFlow_1iea5hb">
        <di:waypoint x="4980" y="360" />
        <di:waypoint x="5000" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0sly7vj_di" bpmnElement="SequenceFlow_0sly7vj">
        <di:waypoint x="4610" y="367" />
        <di:waypoint x="4680" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1xwhq5n_di" bpmnElement="Task_1wlc87k">
        <dc:Bounds x="4510" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1fpsa5h_di" bpmnElement="SequenceFlow_1fpsa5h">
        <di:waypoint x="4860" y="360" />
        <di:waypoint x="4880" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_002ci3q_di" bpmnElement="Task_0oqlrwi">
        <dc:Bounds x="4760" y="320" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BoundaryEvent_1m6v3g7_di" bpmnElement="IntermediateThrowEvent_1ejotpp">
        <dc:Bounds x="4912" y="442" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_151g1le_di" bpmnElement="Task_08i1ak7">
        <dc:Bounds x="5000" y="320" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SubProcess_1h0prbh_di" bpmnElement="SubProcess_1h0prbh" isExpanded="true">
        <dc:Bounds x="4680" y="273" width="500" height="187" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_0wctu20_di" bpmnElement="StartEvent_0wctu20">
        <dc:Bounds x="4702" y="342" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_17gcga3_di" bpmnElement="SequenceFlow_17gcga3">
        <di:waypoint x="5180" y="367" />
        <di:waypoint x="5285" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1w870fq_di" bpmnElement="SequenceFlow_1w870fq">
        <di:waypoint x="4738" y="360" />
        <di:waypoint x="4760" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1rrdcx5_di" bpmnElement="EndEvent_1rrdcx5">
        <dc:Bounds x="5122" y="342" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1jqosge_di" bpmnElement="SequenceFlow_1jqosge">
        <di:waypoint x="5100" y="360" />
        <di:waypoint x="5122" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_04wjrn7_di" bpmnElement="Task_04wjrn7">
        <dc:Bounds x="5080" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0gqsdiw_di" bpmnElement="SequenceFlow_0gqsdiw">
        <di:waypoint x="4930" y="478" />
        <di:waypoint x="4930" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4839" y="513" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1hm1qoz_di" bpmnElement="EndEvent_1hm1qoz">
        <dc:Bounds x="5232" y="582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_12rb5lt_di" bpmnElement="SequenceFlow_12rb5lt">
        <di:waypoint x="5180" y="600" />
        <di:waypoint x="5232" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_136ygle_di" bpmnElement="UserTask_136ygle">
        <dc:Bounds x="5450" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1rqeihd_di" bpmnElement="SequenceFlow_1rqeihd">
        <di:waypoint x="5550" y="367" />
        <di:waypoint x="5655" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0efz7a1_di" bpmnElement="ExclusiveGateway_0efz7a1" isMarkerVisible="true">
        <dc:Bounds x="5655" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1tnfo1v_di" bpmnElement="SequenceFlow_1tnfo1v">
        <di:waypoint x="5705" y="367" />
        <di:waypoint x="5820" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5698" y="343" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1jsixfd_di" bpmnElement="ExclusiveGateway_1jsixfd" isMarkerVisible="true">
        <dc:Bounds x="5285" y="342" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0r6bf1a_di" bpmnElement="SequenceFlow_0r6bf1a">
        <di:waypoint x="5335" y="367" />
        <di:waypoint x="5450" y="367" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5350" y="320" width="88" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0go72rk_di" bpmnElement="SequenceFlow_0go72rk">
        <di:waypoint x="5680" y="342" />
        <di:waypoint x="5680" y="120" />
        <di:waypoint x="4560" y="120" />
        <di:waypoint x="4560" y="327" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5115" y="84" width="89" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0epk6er_di" bpmnElement="UserTask_0epk6er">
        <dc:Bounds x="3640" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0xnmcpc_di" bpmnElement="SequenceFlow_0xnmcpc">
        <di:waypoint x="3740" y="367" />
        <di:waypoint x="3800" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1lp2gbj_di" bpmnElement="SequenceFlow_1lp2gbj">
        <di:waypoint x="5310" y="392" />
        <di:waypoint x="5310" y="750" />
        <di:waypoint x="4540" y="750" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5323" y="433" width="73" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1yqv543_di" bpmnElement="SequenceFlow_1yqv543">
        <di:waypoint x="5920" y="367" />
        <di:waypoint x="6010" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_1lwyoti_di" bpmnElement="Task_1lwyoti">
        <dc:Bounds x="6010" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0237yc6_di" bpmnElement="SequenceFlow_0237yc6">
        <di:waypoint x="6110" y="367" />
        <di:waypoint x="6242" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0aws3c5_di" bpmnElement="Task_19fppwk">
        <dc:Bounds x="1930" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_11myu89_di" bpmnElement="SequenceFlow_11myu89">
        <di:waypoint x="2530" y="560" />
        <di:waypoint x="2590" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1i4lowj_di" bpmnElement="Task_0981mha">
        <dc:Bounds x="2430" y="520" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_1v2zko4_di" bpmnElement="ServiceTask_1v2zko4">
        <dc:Bounds x="3080" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1ivtakg_di" bpmnElement="SequenceFlow_1ivtakg">
        <di:waypoint x="3180" y="600" />
        <di:waypoint x="3220" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1v9silr_di" bpmnElement="ServiceTask_1v9silr">
        <dc:Bounds x="4880" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1ko2fps_di" bpmnElement="SequenceFlow_1ko2fps">
        <di:waypoint x="4980" y="600" />
        <di:waypoint x="5080" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1ki8xoy_di" bpmnElement="ServiceTask_1ki8xoy">
        <dc:Bounds x="4300" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0zcmnxv_di" bpmnElement="SequenceFlow_0zcmnxv">
        <di:waypoint x="4400" y="600" />
        <di:waypoint x="4460" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0bakymz_di" bpmnElement="Task_1e7zlpb">
        <dc:Bounds x="5820" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1igr8cw_di" bpmnElement="SequenceFlow_1igr8cw">
        <di:waypoint x="3820" y="560" />
        <di:waypoint x="3820" y="407" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1lal9tn_di" bpmnElement="SequenceFlow_1lal9tn">
        <di:waypoint x="4440" y="750" />
        <di:waypoint x="3690" y="750" />
        <di:waypoint x="3690" y="407" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ScriptTask_1sryadg_di" bpmnElement="Task_0wun3b0">
        <dc:Bounds x="4440" y="710" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_00eo2kz_di" bpmnElement="Task_1e2xtr6">
        <dc:Bounds x="420" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_14e796r_di" bpmnElement="Task_0vofu37">
        <dc:Bounds x="730" y="530" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1d2fsrv_di" bpmnElement="SequenceFlow_1d2fsrv">
        <di:waypoint x="1100" y="367" />
        <di:waypoint x="1155" y="367" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0hzpa4d_di" bpmnElement="Task_1cudgs5">
        <dc:Bounds x="1000" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0rg0185_di" bpmnElement="Task_1ahbpt5">
        <dc:Bounds x="1760" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_16mr4a1_di" bpmnElement="ServiceTask_16mr4a1">
        <dc:Bounds x="1470" y="327" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0lvjna5_di" bpmnElement="SequenceFlow_0lvjna5">
        <di:waypoint x="1570" y="367" />
        <di:waypoint x="1625" y="367" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
